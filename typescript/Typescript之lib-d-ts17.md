---
title: Typescriptä¹‹lib.d.ts
date: 2020-12-18 14:42:47
description: ğŸ˜‹typescriptå­¦ä¹ å®Œç»“!
tags: js/typescript
categories: Javascript
---

### ä»€ä¹ˆæ˜¯lib.d.ts

å½“ä½ å®‰è£…Typescriptæ—¶ï¼Œä¼šé¡ºå¸¦å®‰è£…lib.d.tsç­‰å£°æ˜æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶åŒ…å«äº†avascriptè¿è¡Œæ—¶ä»¥åŠDOMä¸­å­˜åœ¨å„ç§å¸¸è§çš„ç¯å¢ƒå£°æ˜ã€‚

- å®ƒè‡ªåŠ¨åŒ…å«åœ¨å’Œypescripté¡¹ç›®çš„ç¼–è¯‘ä¸Šä¸‹æ–‡ä¸­
- å®ƒèƒ½è®©ä½ å¿«é€Ÿå¹¶å§‹ä¹¦å†™ç»è¿‡ç±»å‹æ£€æŸ¥çš„Javascriptä»£ç 

ä½ å¯ä»¥é€šè¿‡æŒ‡å®š`--noLib `çš„ç¼–è¯‘å™¨å‘½ä»¤è¡Œæ ‡å¿—ï¼ˆæˆ–è€…åœ¨`tsconfig.json`ä¸­æŒ‡å®šé€‰é¡¹`noLib: trueï¼Œ`ç¼–è¯‘é€‰é¡¹)ä»ä¸Šä¸‹æ–‡ä¸­æ’é™¤æ­¤æ–‡ä»¶(ä¸è¿‡ä¸å»ºè®®)ã€‚

```typescript
tsc --noLib
```

`test.ts`

```typescript
let prop=123;
let s=prop.toString();
```

è¿™æ®µä»£ç çš„ç±»å‹æ£€æŸ¥æ­£å¸¸ï¼Œå› ä¸º`lib.d.ts` ä¸ºæ‰€æœ‰Javascriptå¯¹è±¡å®šä¹‰äº†`toString`æ–¹æ³•ã€‚

### lib.d.tsçš„å†…éƒ¨

`lib.d.ts`çš„å†…å®¹ä¸»è¦æ˜¯ä¸€äº›å˜é‡å£°æ˜(å¦‚: windowã€documentã€math)å’Œä¸€äº›ç±»ä¼¼çš„æ¥å£å£°æ˜(å¦‚: windowã€Documentã€Math)ã€‚

æœ€ç®€å•çš„æ–¹å¼å¯»æ‰¾ä»£ç çš„ç±»å‹(å¦‚: Math.floorï¼‰)æ˜¯ä½¿ç”¨IDEçš„ F12é”®è·³è½¬åˆ°å®šä¹‰(ä½¿ç”¨æ–¹å¼æ˜¯,æŠŠé¼ æ ‡æ”¾åœ¨å¯¹åº”çš„æ–¹æ³•ä»£ç ä¸Šï¼Œå†æŒ‰ä¸‹f12é”®)

![lib53cdf8bf9a6f648f.png](https://cdn.longdoer.com/2020/12/19/lib53cdf8bf9a6f648f.png)

### ä¿®æ”¹lib.d.tsä¹‹å…¨å±€window

åœ¨TypeScript ä¸­ï¼Œæ¥å£æ˜¯å¼€æ”¾å¼çš„ï¼Œè¿™æ„å‘³ç€å½“ä½ æƒ³ä½¿ç”¨ä¸å­˜åœ¨çš„æˆå‘˜æ—¶ï¼Œä½ ä»…ä»…æ˜¯éœ€è¦æ·»åŠ å®ƒä»¬è‡³` lib.d.ts `ä¸­çš„æ¥å£å£°æ˜ä¸­ï¼ŒTypescriptå°†ä¼šè‡ªåŠ¨æ¥æ”¶å®ƒã€‚

æ³¨æ„ï¼Œä½ éœ€è¦åœ¨å…¨å±€æ¨¡å—ä¸­åšè¿™äº›ä¿®æ”¹ï¼Œä»¥ä½¿è¿™äº›æ¥å£ä¸`lib.d.ts `ç›¸å…³è”ã€‚å»ºè®®åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªç§°ä¸º globals.d.ts çš„ç‰¹æ®Šæ–‡ä»¶,è¿™æ ·æ—¢å¯ä¿®æ”¹å…¨å±€ä¹Ÿä¸ä¼šå½±å“å…¶ä»–çš„é¡¹ç›®ä»£ç 

`globle.d.ts`

```typescript
interface Window {
    hello(): void;
}
```

### ä¿®æ”¹lib.d.tsä¹‹å…¨å±€Math

å½“ä½ æƒ³åœ¨Mathå…¨å±€å˜é‡ä¸Šæ·»åŠ ä½ éœ€è¦çš„å±æ€§æ—¶ï¼Œä½ ä»…éœ€è¦æŠŠå®ƒæ·»åŠ è‡³Math çš„å…¨å±€æ¥å£ä¸Šå³å¯

![math_tsc57af5ba0b651c81.png](https://cdn.longdoer.com/2020/12/19/math_tsc57af5ba0b651c81.png)

![ts_libbf4e5172e9640fa8.png](https://cdn.longdoer.com/2020/12/19/ts_libbf4e5172e9640fa8.png)

### ä¿®æ”¹lib.d.tsä¹‹å…¨å±€Date

æ¥å£`DateConstructor `(å³Dateçš„æ•°æ®æ ¼å¼)ä¸ä½ åœ¨ä¸Šæ–‡ä¸­çœ‹åˆ°çš„ Math å’Œ window æ¥å£ä¸€æ ·ï¼Œå› ä¸ºå®ƒæ¶µç›–äº†å¯ä»¥ä½¿ç”¨çš„ Date å…¨å±€å˜é‡çš„æˆå‘˜(å¦‚: Date.now())ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜åŒ…å«äº†å¯ä»¥è®©ä½ åˆ›å»ºDate å®ä¾‹çš„æ„é€ å‡½æ•°ç­¾å(å¦‚: new Date())

![tslib_date1a3ed214dbad91ff.png](https://cdn.longdoer.com/2020/12/19/tslib_date1a3ed214dbad91ff.png)

### ä¿®æ”¹lib.d.tsä¹‹å…¨å±€string

åœ¨`lib.d.ts `é‡Œstringï¼Œä¸Dateç±»ä¼¼(å…¨å±€å˜é‡ stringï¼ŒStringConstructoræ¥å£ï¼ŒStringæ¥å£)ã€‚ä½†æ˜¯å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œstring æ¥å£ä¹Ÿä¼šå½±å“å­—ç¬¦ä¸²å­—é¢é‡

![lib_ts_stringb3296083bbe44edb.png](https://cdn.longdoer.com/2020/12/19/lib_ts_stringb3296083bbe44edb.png)

### è‡ªå®šä¹‰lib.d.ts

å¦‚ä¸Šæ–‡è¯´æåŠï¼Œä½¿ç”¨`--noLib `ç¼–è¯‘é€‰é¡¹ä¼šå¯¼è‡´ Typescript æ’é™¤è‡ªåŠ¨åŒ…å«çš„ `lib.d.ts `æ–‡ä»¶ã€‚é‚£ä¸ºå•¥éœ€è¦å®ç°è¿™ç§åŠŸèƒ½å‘¢?

- è¿è¡Œçš„Javascriptç¯å¢ƒä¸åŸºäºæ ‡å‡†æµè§ˆå™¨è¿è¡Œæ—¶ç¯å¢ƒæœ‰å¾ˆå¤§ä¸åŒ;
- å¸Œæœ›åœ¨ä»£ç é‡Œä¸¥æ ¼çš„æ§åˆ¶å…¨å±€å˜é‡ï¼Œä¾‹å¦‚: lib.d.tså®šä¹‰äº†itemä½œä¸ºå…¨å±€å˜é‡ï¼Œä½ å¹¶ä¸å¸Œæœ›å®ƒæ³„æ¼åˆ°ä½ çš„ä»£ç é‡Œã€‚

ä¸€æ—¦ä½ æ’é™¤äº†é»˜è®¤çš„` lib.d.ts` æ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨ç¼–è¯‘ä¸Šä¸‹æ–‡ä¸­åŒ…å«ä¸€ä¸ªç±»ä¼¼å‘½åçš„æ–‡ä»¶ï¼ŒTypescriptå°†é€‰æ‹©å®ƒè¿›è¡Œç±»å‹æ£€æŸ¥ã€‚

âš ï¸å°å¿ƒä½¿ç”¨`--noLib`é€‰é¡¹ï¼Œä¸€æ—¦ä½ ä½¿ç”¨ä½¿ç”¨äº†å®ƒï¼Œå½“ä½ æŠŠä½ çš„é¡¹ç›®åˆ†äº«ç»™å…¶ä»–äººæ—¶ï¼Œå®ƒä»¬ä¹Ÿå°†è¢«è¿«ä½¿ç”¨`--noLib`é€‰é¡¹ï¼Œæ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¦‚æœå°†è¿™äº›ä»£ç æ”¾å…¥ä½ çš„é¡¹ç›®ä¸­ï¼Œä½ å¯èƒ½éœ€è¦å°†å®ƒæ”¾å…¥ä½ çš„åŸºäº`lib `ä»£ç ä¸­ã€‚



### --libé€‰é¡¹

è®¾ç½®ç¼–è¯‘ç›®æ ‡ä¸ºes6æ—¶ï¼Œèƒ½å¯¼è‡´lib.d.tsåŒ…å«æ›´å¤šçš„åƒPromise çš„ç°ä»£(es6ï¼‰å†…å®¹çš„ç¯å¢ƒå£°æ˜.ä¸€äº›æ—¶å€™ï¼Œä½ æƒ³è¦è§£è€¦ç¼–è¯‘ç›®æ ‡ï¼ˆç”Ÿæˆçš„JavaScriptç‰ˆæœ¬ï¼‰å’Œç¯å¢ƒåº“æ”¯æŒä¹‹é—´çš„å…³ç³»ã€‚ä¾‹å¦‚å¯¹äºPromiseï¼Œä½ çš„ç¼–è¯‘ç›®æ ‡æ˜¯`--target es5`ï¼Œä½†æ˜¯ä½ ä»ç„¶æƒ³ä½¿ç”¨å®ƒï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨`lib` å¯¹å®ƒè¿›è¡Œæ§åˆ¶ã€‚

```typescript
>tsc --target es5 --lib dom,es6
```

#### å‘½ä»¤è¡Œ

<font style="color:skyblue;">ä½ å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæˆ–è€…åœ¨tsconfig.jsonä¸­æä¾›æ­¤é€‰é¡¹(æ¨è)</font>

`config.json`

![tsconfig_lib2dc84c242b6e84fd.png](https://cdn.longdoer.com/2020/12/19/tsconfig_lib2dc84c242b6e84fd.png)



### 

![lib-1679cef2b11d760e9.png](https://cdn.longdoer.com/2020/12/19/lib-1679cef2b11d760e9.png)